<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VedaChain - Ayurvedic Traceability</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --green-900: #064d3b;
      --green-800: #0b5d45;
      --green-700: #0e764f;
      --accent: #10b981;
      --muted: #6b7a7a;
      --card-bg: #ffffff;
      --light-green: #eaf7f0;
      --border: rgba(16,185,129,0.08);
      --radius: 12px;
      --maxwidth: 1200px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:#f6faf9;color:#07201a;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }

    .app{
      display:flex;min-height:100vh;
    }

    /* SIDEBAR */
    .sidebar{
      width:260px;background:linear-gradient(180deg,var(--green-900),var(--green-800));color:#e8fff5;
      padding:28px 20px;display:flex;flex-direction:column;justify-content:space-between;
    }
    .brand{
      display:flex;gap:14px;align-items:center;
    }
    .logo{
      width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);
      display:flex;align-items:center;justify-content:center;font-weight:800;color:#053023;font-size:18px;box-shadow:0 6px 18px rgba(0,0,0,0.12);
    }
    .brand h1{margin:0;font-size:16px;letter-spacing:0.2px}
    .brand p{margin:2px 0 0 0;font-size:12px;opacity:0.9;color:#def6e8}

    .nav{margin-top:28px}
    .nav a{
      display:flex;align-items:center;gap:12px;padding:12px 12px;border-radius:10px;color:inherit;text-decoration:none;font-weight:600;
      margin-bottom:8px;transition:all .16s;
    }
    .nav a:hover{background:rgba(255,255,255,0.03);transform:translateX(6px)}
    .nav a.active{background:rgba(0,0,0,0.08);box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);}

    .nav .icon{width:18px;height:18px;opacity:0.95}

    .sidebar-bottom{font-size:12px;color:#c8f3df;opacity:0.95;padding-top:18px;border-top:1px solid rgba(255,255,255,0.03)}
    .status-dot{display:inline-block;width:10px;height:10px;border-radius:50%;background:#2fd67a;margin-right:8px;vertical-align:-1px}

    /* MAIN */
    .main{
      flex:1;padding:22px 32px;max-width:100%;overflow:auto;
    }

    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
    .page-title{font-size:28px;margin:0}
    .page-sub{color:var(--muted);font-size:13px;margin-top:6px}

    /* KPI cards row */
    .kpi-row{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:12px}
    .kpi{
      background:var(--card-bg);padding:18px;border-radius:12px;border:1px solid var(--border);box-shadow:0 6px 18px rgba(10,30,20,0.03);
    }
    .kpi small{color:var(--muted);display:block;margin-bottom:8px;font-weight:700}
    .kpi .value{font-size:28px;color:var(--green-900);font-weight:800}

    /* big panels */
    .grid{
      display:grid;grid-template-columns:2fr 1fr;gap:18px;margin-top:18px;
    }
    .panel{
      background:var(--card-bg);border-radius:12px;padding:18px;border:1px solid var(--border);
      min-height:260px;box-shadow:0 6px 18px rgba(10,30,20,0.02);
    }
    .panel h3{margin:0 0 12px 0;font-size:18px}
    .empty-area{
      border-radius:8px;border:2px dashed rgba(10,120,80,0.06);height:220px;display:flex;align-items:center;justify-content:center;color:var(--muted);
    }

    /* Donut chart container */
    .donut-wrap{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}
    .donut-legend{display:flex;flex-direction:column;gap:8px;margin-left:12px}
    .legend-item{display:flex;gap:8px;align-items:center;font-size:13px;color:var(--muted)}

    /* Responsive */
    @media (max-width:1000px){
      .kpi-row{grid-template-columns:1fr;align-items:stretch}
      .grid{grid-template-columns:1fr; }
      .sidebar{display:none}
    }

    /* small helpers */
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--light-green);color:var(--green-900);font-weight:700;font-size:12px}
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" role="navigation" aria-label="Main navigation">
      <div>
        <div class="brand">
          <div class="logo">VC</div>
          <div>
            <h1>VedaChain</h1>
            <p>AYURVEDIC TRACEABILITY</p>
          </div>
        </div>

        <nav class="nav" aria-label="Sidebar menu">
          <a href="#" class="active"><svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="8" height="8" rx="2" fill="#ffffff" opacity="0.06"/><rect x="13" y="3" width="8" height="8" rx="2" fill="#ffffff" opacity="0.02"/></svg> Dashboard</a>

          <a href="#"><svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M6 3h12v2H6zM6 7h12v2H6zM6 11h12v2H6z" fill="#fff" opacity="0.06"/></svg> Farmer Collection</a>

          <a href="#"><svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 2l3 6h6l-4.9 3.6L19 20l-7-4-7 4 1.8-8.4L2 8h6z" fill="#fff" opacity="0.06"/></svg> Processing Unit</a>

          <a href="#"><svg class="icon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="8" fill="#fff" opacity="0.06"/></svg> Quality Lab</a>

          <a href="#"><svg class="icon" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="14" rx="2" fill="#fff" opacity="0.04"/></svg> Consumer Scan</a>
        </nav>
      </div>

      <div class="sidebar-bottom">
        <div><span class="status-dot" aria-hidden="true"></span> Network Status: <strong style="color:#c8f3df">Online</strong></div>
        <div style="margin-top:6px;font-size:12px;color:#c8f3df">VedaNet Mainnet v1.0</div>
      </div>
    </aside>

    <!-- Main area -->
    <main class="main" role="main">
      <div class="topbar">
        <div>
          <h2 class="page-title">Network Dashboard</h2>
          <div class="page-sub">Real-time supply chain monitoring</div>
        </div>

        <div style="display:flex;gap:12px;align-items:center">
          <div class="badge">Device: Demo</div>
        </div>
      </div>

      <!-- KPI row -->
      <div class="kpi-row">
        <div class="kpi">
          <small>Total Transactions</small>
          <div class="value" id="totalTx">0</div>
        </div>
        <div class="kpi">
          <small>Active Batches</small>
          <div class="value" id="activeBatches">0</div>
        </div>
        <div class="kpi">
          <small>Node Health</small>
          <div style="display:flex;align-items:center;gap:10px">
            <div style="width:14px;height:14px;border-radius:50%;background:#2fd67a"></div>
            <div style="font-weight:800">Operational</div>
          </div>
        </div>
      </div>

      <!-- Panels -->
      <div class="grid">
        <!-- Left: Transactions / Transaction types -->
        <section class="panel" aria-labelledby="transactions-title">
          <h3 id="transactions-title">Transaction Types</h3>
          <div class="empty-area"> <div style="text-align:center"><strong style="display:block;color:#0b5d45">No transactions yet</strong><span style="color:var(--muted)">Live chart will appear here once data is received</span></div></div>
        </section>

        <!-- Right: Compliance donut -->
        <aside class="panel" aria-labelledby="compliance-title">
          <h3 id="compliance-title">Compliance Audit</h3>
          <div style="display:flex;align-items:center;justify-content:space-between;height:200px">
            <div class="donut-wrap" style="flex:1;min-width:150px">
              <canvas id="donutChart" width="160" height="160"></canvas>
            </div>
            <div style="flex:1;padding-left:12px">
              <div class="donut-legend">
                <div class="legend-item"><span style="width:12px;height:12px;background:#10b981;border-radius:4px;display:inline-block"></span> Compliant <strong style="margin-left:8px;color:#07201a">72%</strong></div>
                <div class="legend-item"><span style="width:12px;height:12px;background:#f59e0b;border-radius:4px;display:inline-block"></span> Warning <strong style="margin-left:8px;color:#07201a">18%</strong></div>
                <div class="legend-item"><span style="width:12px;height:12px;background:#ef4444;border-radius:4px;display:inline-block"></span> Non-compliant <strong style="margin-left:8px;color:#07201a">10%</strong></div>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <!-- Additional row (small cards) -->
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:18px">
        <div class="panel"><h3>Active Nodes</h3><div style="font-size:22px;font-weight:800;color:#0b5d45" id="nodesCount">5</div></div>
        <div class="panel"><h3>Recent Batches</h3><div style="color:var(--muted)">No recent batch activity</div></div>
        <div class="panel"><h3>Export</h3><div style="margin-top:8px"><button id="exportBtn" style="padding:10px 12px;border-radius:8px;border:1px solid var(--border);background:#fff;font-weight:700;cursor:pointer">Export CSV</button></div></div>
      </div>

    </main>
  </div>

  <script>
    // Demo counts animation
    function animateValue(id, start, end, duration) {
      const obj = document.getElementById(id);
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        obj.textContent = Math.floor(progress * (end - start) + start);
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    animateValue('totalTx', 0, 0, 800); // initially 0
    animateValue('activeBatches', 0, 0, 800);
    animateValue('nodesCount', 0, 5, 900);

    // Donut chart (Chart.js)
    const ctx = document.getElementById('donutChart').getContext('2d');
    const donut = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Compliant','Warning','Non-compliant'],
        datasets: [{
          data: [72, 18, 10],
          backgroundColor: ['#10b981','#f59e0b','#ef4444'],
          hoverOffset: 6,
          borderWidth: 0
        }]
      },
      options: {
        cutout: '68%',
        plugins: {
          legend: { display: false },
          tooltip: { callbacks: {
            label: function(ctx) {
              const v = ctx.formattedValue || ctx.raw;
              return ctx.label + ': ' + v + '%';
            }
          } }
        },
        maintainAspectRatio: false
      }
    );

    // Export CSV demo (client-only)
    document.getElementById('exportBtn').addEventListener('click', function(){
      const rows = [
        ['id','type','status','timestamp'],
        ['BATCH-001','collection','compliant','2025-01-12 08:10'],
        ['BATCH-002','processing','warning','2025-01-12 09:02']
      ];
      let csvContent = rows.map(e => e.join(",")).join("\n");
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'vedachain_export.csv'; a.style.display = 'none';
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>
